<div class="live-shell">

    <div class="temp">
        <div>{{mapview?.viewport?.screenWidth}}, {{mapview?.viewport?.screenHeight}}</div>
        <button (click)="center1()">Center All</button>
        <button (click)="center2()">Center Height</button>
        <button (click)="center3()">Center Witdh</button>
        <button (click)="mapview.zoomOut()">Zoom Out</button>
        <button (click)="mapview.zoomIn()">Zoom In</button>
    </div>

    <map class="map-container" [mapdata]="mapdata" #mapview></map>

    <chat-preview *ngIf="chatPreview"></chat-preview>

    <full-chat *ngIf="!chatPreview" class="chat"></full-chat>

    <button class="detail-page-back" (click)='onBack()'><img src="/assets/components/back.png"></button>

    <div class="map-tools" *ngIf="!gmtool && !tool && !addtools">
        <fa-icon class="map-tool-icon clickable" icon="tools" data-fa-glow size="lg" (click)="showGmTools()" *ngIf="isGM()"></fa-icon>
        <fa-icon class="map-tool-icon clickable" icon="location" size="lg" (click)="recenter()" *ngIf="needsRecenter()"></fa-icon>
        <fa-icon class="map-tool-icon clickable" icon="ruler" size="lg" (click)="startMeasure()"></fa-icon>
        <fa-icon class="map-tool-icon clickable" icon="map-marked-alt" size="lg" (click)="addToMap()"></fa-icon>
    </div>

    <tool-tabs *ngIf="gmtool" (onClose)="closeGmTools()" (onActivate)="onGMToolActivate($event)">
        <tool-tab label="Grid" icon="border-all">
            <grid-tool [mapdata]="mapdata" (update)="updateGrid($event)"></grid-tool>
        </tool-tab>
        <tool-tab label="Fog" icon="fog">
            <fog-tool  [mapdata]="mapdata" (update)="updateFog($event)"></fog-tool>
        </tool-tab>
        <tool-tab label="Calibrate" icon="pencil-ruler">
            <calibrate-tool  [mapdata]="mapdata" [mapview]="mapview"
            (update)="updateCalibrate($event)" #calibrate>
        </calibrate-tool>
        </tool-tab>
    </tool-tabs>

    <tool-tabs *ngIf="addtools" (onClose)="onAddToolsClose()" (onActivate)="onAddToolActivate($event)">
        <tool-tab label="New" icon="plus-hexagon">
            <add-tool></add-tool>
        </tool-tab>
        <tool-tab label="Favorites" icon="star">
            <favorites-tool></favorites-tool>
        </tool-tab>
    </tool-tabs>

    <tool-tabs *ngIf="circle" (onClose)="onCircleClose()">
        <tool-tab label="Circle" icon="draw-circle">
            <edit-circle-tool></edit-circle-tool>
        </tool-tab>
    </tool-tabs>

</div>